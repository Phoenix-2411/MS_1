[media pointer="file-service://file-BmsawaHY6nt2xxS91VMEYK"]
-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public."SequelizeMeta"
(
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT "SequelizeMeta_pkey" PRIMARY KEY (name)
);

CREATE TABLE IF NOT EXISTS regulatedentityservice.attachments
(
    id uuid NOT NULL,
    "regulatedEntityInspectionTypeId" uuid,
    "regulatedEntityItemId" uuid,
    "mimeType" character varying(255) COLLATE pg_catalog."default",
    title character varying(255) COLLATE pg_catalog."default",
    description character varying(5000) COLLATE pg_catalog."default",
    active boolean NOT NULL DEFAULT true,
    deleted boolean NOT NULL DEFAULT false,
    "createdBy" uuid,
    "updatedBy" uuid,
    "createdAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "metaData" jsonb,
    annotations jsonb NOT NULL DEFAULT '[]'::jsonb,
    "annotationTypes" jsonb NOT NULL DEFAULT '[]'::jsonb,
    "contextType" character varying(255) COLLATE pg_catalog."default",
    "regulatedEntityId" uuid,
    CONSTRAINT attachments_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS regulatedentityservice.contacts
(
    id uuid NOT NULL,
    "regulatedEntityInspectionTypeId" uuid,
    "contactType" character varying(255) COLLATE pg_catalog."default",
    firstname character varying(255) COLLATE pg_catalog."default",
    lastname character varying(255) COLLATE pg_catalog."default",
    address text COLLATE pg_catalog."default",
    city character varying(255) COLLATE pg_catalog."default",
    state character varying(255) COLLATE pg_catalog."default",
    zip character varying(255) COLLATE pg_catalog."default",
    "default" boolean NOT NULL DEFAULT false,
    active boolean NOT NULL DEFAULT true,
    deleted boolean NOT NULL DEFAULT false,
    "createdBy" uuid,
    "updatedBy" uuid,
    "createdAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "workPhone" character varying(255) COLLATE pg_catalog."default",
    "workEmail" character varying(255) COLLATE pg_catalog."default",
    middlename character varying(255) COLLATE pg_catalog."default",
    "clientMetaData" jsonb,
    title character varying(40) COLLATE pg_catalog."default",
    "regulatedEntityId" uuid,
    CONSTRAINT contacts_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS regulatedentityservice."covidData"
(
    id bigint NOT NULL,
    iso2 character varying(255) COLLATE pg_catalog."default",
    iso3 character varying(255) COLLATE pg_catalog."default",
    code3 integer,
    "FIPS" integer,
    county character varying(255) COLLATE pg_catalog."default",
    state character varying(255) COLLATE pg_catalog."default",
    country character varying(255) COLLATE pg_catalog."default",
    lat double precision,
    "long" double precision,
    "combinedKey" character varying(255) COLLATE pg_catalog."default",
    date date NOT NULL DEFAULT CURRENT_TIMESTAMP,
    count integer,
    "createdAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS regulatedentityservice."regulatedEntity"
(
    id uuid NOT NULL,
    "clientCode" character varying(255) COLLATE pg_catalog."default" NOT NULL,
    "entityType" character varying(255) COLLATE pg_catalog."default",
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    address text COLLATE pg_catalog."default",
    zip character varying(255) COLLATE pg_catalog."default",
    state character varying(255) COLLATE pg_catalog."default" NOT NULL,
    county character varying(255) COLLATE pg_catalog."default",
    municipality character varying(255) COLLATE pg_catalog."default",
    latitude double precision,
    longitude double precision,
    "clientMetaData" jsonb,
    owners character varying(255) COLLATE pg_catalog."default",
    "attributeMap" jsonb,
    active boolean NOT NULL DEFAULT true,
    deleted boolean NOT NULL DEFAULT false,
    "createdBy" uuid,
    "updatedBy" uuid,
    "createdAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    country character varying(255) COLLATE pg_catalog."default",
    "externalId" character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT "regulatedEntity_pkey" PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS regulatedentityservice."regulatedEntityInspectionType"
(
    id uuid NOT NULL,
    "clientCode" character varying(255) COLLATE pg_catalog."default" NOT NULL,
    "regulatedEntityId" uuid NOT NULL,
    "inspectionTypeCode" character varying(255) COLLATE pg_catalog."default",
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    address text COLLATE pg_catalog."default",
    latitude double precision,
    longitude double precision,
    state character varying(255) COLLATE pg_catalog."default" NOT NULL,
    county character varying(255) COLLATE pg_catalog."default",
    municipality character varying(255) COLLATE pg_catalog."default",
    "mailingAddress" character varying(255) COLLATE pg_catalog."default" NOT NULL,
    "attributeMap" jsonb,
    "clientMetaData" jsonb,
    active boolean NOT NULL DEFAULT true,
    deleted boolean NOT NULL DEFAULT false,
    "createdBy" uuid,
    "updatedBy" uuid,
    "createdAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "regStartDate" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    country character varying(255) COLLATE pg_catalog."default",
    zip character varying(255) COLLATE pg_catalog."default",
    "externalId" character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT "regulatedEntityInspectionType_pkey" PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS regulatedentityservice."regulatedEntityItem"
(
    id uuid NOT NULL,
    "clientCode" character varying(255) COLLATE pg_catalog."default" NOT NULL,
    "regulatedEntityInspectionTypeId" uuid NOT NULL,
    "regulatedEntityId" uuid NOT NULL,
    "keyName" character varying(255) COLLATE pg_catalog."default",
    "keyValue" character varying(255) COLLATE pg_catalog."default",
    "attributeMap" jsonb,
    active boolean NOT NULL DEFAULT true,
    deleted boolean NOT NULL DEFAULT false,
    "createdBy" uuid,
    "updatedBy" uuid,
    "createdAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "externalId" character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT "regulatedEntityItem_pkey" PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS regulatedentityservice."reitDetails"
(
    "regulatedEntityInspectionTypeId" uuid NOT NULL,
    "lastInspectionId" uuid,
    "lastInspectionDate" timestamp with time zone,
    "assignedToName" character varying(255) COLLATE pg_catalog."default",
    "assignedToStartDate" timestamp with time zone,
    "assignedToTeamId" uuid,
    "createdBy" uuid,
    "updatedBy" uuid,
    "createdAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "assignedToId" uuid,
    CONSTRAINT "reitDetails_pkey" PRIMARY KEY ("regulatedEntityInspectionTypeId")
);

CREATE TABLE IF NOT EXISTS regulatedentityservice."riskMetric"
(
    id uuid NOT NULL,
    "regulatedEntityInspectionTypeId" uuid NOT NULL,
    category character varying(255) COLLATE pg_catalog."default",
    value double precision,
    "createdBy" uuid,
    "updatedBy" uuid,
    "createdAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "riskMetric_pkey" PRIMARY KEY (id)
);

ALTER TABLE IF EXISTS regulatedentityservice.attachments
    ADD CONSTRAINT "attachments_regulatedEntityId_fkey" FOREIGN KEY ("regulatedEntityId")
    REFERENCES regulatedentityservice."regulatedEntity" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS regulatedentityservice.attachments
    ADD CONSTRAINT "attachments_regulatedEntityInspectionTypeId_fkey" FOREIGN KEY ("regulatedEntityInspectionTypeId")
    REFERENCES regulatedentityservice."regulatedEntityInspectionType" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS regulatedentityservice.attachments
    ADD CONSTRAINT "attachments_regulatedEntityItemId_fkey" FOREIGN KEY ("regulatedEntityItemId")
    REFERENCES regulatedentityservice."regulatedEntityItem" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS regulatedentityservice.contacts
    ADD CONSTRAINT "contacts_regulatedEntityId_fkey" FOREIGN KEY ("regulatedEntityId")
    REFERENCES regulatedentityservice."regulatedEntity" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS regulatedentityservice.contacts
    ADD CONSTRAINT "contacts_regulatedEntityInspectionTypeId_fkey" FOREIGN KEY ("regulatedEntityInspectionTypeId")
    REFERENCES regulatedentityservice."regulatedEntityInspectionType" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS regulatedentityservice."regulatedEntityInspectionType"
    ADD CONSTRAINT "regulatedEntityInspectionType_regulatedEntityId_fkey" FOREIGN KEY ("regulatedEntityId")
    REFERENCES regulatedentityservice."regulatedEntity" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS regulatedentityservice."regulatedEntityItem"
    ADD CONSTRAINT "regulatedEntityItem_regulatedEntityId_fkey" FOREIGN KEY ("regulatedEntityId")
    REFERENCES regulatedentityservice."regulatedEntity" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS regulatedentityservice."regulatedEntityItem"
    ADD CONSTRAINT "regulatedEntityItem_regulatedEntityInspectionTypeId_fkey" FOREIGN KEY ("regulatedEntityInspectionTypeId")
    REFERENCES regulatedentityservice."regulatedEntityInspectionType" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS regulatedentityservice."reitDetails"
    ADD CONSTRAINT "reitDetails_regulatedEntityInspectionTypeId_fkey" FOREIGN KEY ("regulatedEntityInspectionTypeId")
    REFERENCES regulatedentityservice."regulatedEntityInspectionType" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;
CREATE INDEX IF NOT EXISTS "reitDetails_pkey"
    ON regulatedentityservice."reitDetails"("regulatedEntityInspectionTypeId");


ALTER TABLE IF EXISTS regulatedentityservice."riskMetric"
    ADD CONSTRAINT "riskMetric_regulatedEntityInspectionTypeId_fkey" FOREIGN KEY ("regulatedEntityInspectionTypeId")
    REFERENCES regulatedentityservice."regulatedEntityInspectionType" (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;

I have provided you ER diagram of my database schema and the table structure. Your job is to understand which fields each table contains and how each table is connected to other table/s.
Understand how the Foreign Keys are used and which tables contains which keys.